#!/usr/bin/env bash

# add a word to the dictionary

# usage:
# ~ $ add enghraifft

if grep -Fxq $1 ./dictionaries/word_list.txt ; then
	echo "\"$1\" is already in word_list.txt"
else
	echo "Adding word \"$1\" to word_list.txt"
	# Add word
	echo $1 >> dictionaries/word_list.txt
	# Sort alphabetically
	sort -u dictionaries/word_list.txt > dictionaries/dict.tmp
	# Replace the old word list
	mv dictionaries/dict.tmp dictionaries/word_list.txt

	printf "Add word \"$1\" to mwy.dic? "
	if [[ "$(read -e -p '[y/n] '; echo $REPLY)" == [Yy]* ]] ; then
		# Add word
		echo $1 >> dictionaries/mwy.dic
		# Write number of lines to tmp
		tail -n +2 dictionaries/mwy.dic | sort -u | wc -l > dictionaries/dict.tmp
		# Write sorted words to tmp
		tail -n +2 dictionaries/mwy.dic | sort -u >> dictionaries/dict.tmp
		# Copy tmp back to mwy.dic
		mv dictionaries/dict.tmp dictionaries/mwy.dic
		echo "Added word."
	fi
fi


echo " "
echo "The dictionary does not recognise the following:"
hunspell -L -d dictionaries/mwy dictionaries/word_list.txt
